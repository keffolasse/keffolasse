<!doctype html>
<html lang="en">
  <head>
    <title>&lt;model-viewer&gt; template</title>
    <meta charset="utf-8">
    <meta name="description" content="&lt;model-viewer&gt; template">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link type="text/css" href="styles.css" rel="stylesheet"/>
    <!-- OPTIONAL: The :focus-visible polyfill removes the focus ring for some input types -->
    <script src="https://unpkg.com/focus-visible@5.0.2/dist/focus-visible.js" defer></script>
  </head>
  <body>
    <!-- <model-viewer> HTML element -->
    <model-viewer id="helmet" camera-controls src="cubeAnim.glb" autoplay ar ar-modes="webxr scene-viewer quick-look" alt="A 3D model of a helmet">
    <div class="controls">
      <div>
        <p>BaseColorTexture</p>
        <select id="normals">
          <option value="images/cayley.jpg">cayley</option>
          <option value="images/shoe1.jpg">Shoe1</option>
        </select>
      </div>
      <div>
        <p>Occlusion</p>
        <select id="occlusion">
          <option value="images/cross.png">Cross</option>
          <option value="images/lines.png">Lines</option>
        </select>
      </div>
      <div>
        <p>Emission</p>
        <select id="emission">
          <option value="images/cross.png">Cross</option>
          <option value="images/lines.png">Lines</option>
        </select>
      </div>
    </div>
  </model-viewer>
  <script type="module">
  const modelViewerTexture = document.querySelector("model-viewer#helmet");

  modelViewerTexture.addEventListener("load", () => {

    let material = modelViewerTexture.model.materials[0];

    let createAndApplyTexture = async (channel, event) => {
      let texture = await modelViewerTexture.createTexture(event.target.value);
      material[channel].setTexture(texture);
    }

    document.querySelector('#normals').addEventListener('input', (event) => {
       applyPBRTexture('baseColorTexture', event);
    });

    document.querySelector('#occlusion').addEventListener('input', (event) => {
      createAndApplyTexture('occlusionTexture', event);
    });

    document.querySelector('#emission').addEventListener('input', (event) => {
      createAndApplyTexture('emissiveTexture', event);
    });
  });

  </script>
    <script src="script.js"></script>
    <!-- Loads <model-viewer> for browsers: -->
    <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
  </body>
</html>
