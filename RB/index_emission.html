<!doctype html>
<html lang="en">
  <head>
    <title>&lt;model-viewer&gt; template</title>
    <meta charset="utf-8">
    <meta name="description" content="&lt;model-viewer&gt; template">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link type="text/css" href="styles.css" rel="stylesheet"/>

    <script src="https://unpkg.com/focus-visible@5.0.2/dist/focus-visible.js" defer></script>
  </head>
  <body>

    <!-- <div id="demo">
    </div> -->
    <div id="model">
      <model-viewer id="sphere" camera-controls interaction-prompt="none" src="reflective-sphere.gltf" ar ar-modes="webxr scene-viewer quick-look" alt="A 3D model of a sphere">
      <div class="controls" ,="" id="emission-value">
          <button data-emission="0.7,0,0">Red</button>
          <button data-emission="0,0.7,0">Green</button>
          <button data-emission="0,0,0.7">Blue</button>


      <!-- <div>
        <p>Emission: <span id="emission-value"></span></p>
        <input id="emission" type="range" min="0" max="1" step="0.01" value="1">
      </div> -->

      <!-- <div>
        <p>Roughness: <span id="roughness-value"></span></p>
        <input id="roughness" type="range" min="0" max="1" step="0.01" value="0">
      </div> -->
    </div>
  </model-viewer>

  <!-- ----------------------------------------------------------- -->
  <!-- <script>
  const modelViewerParameters = document.querySelector("model-viewer#sphere");

  modelViewerParameters.addEventListener("load", (ev) => {

    let material = modelViewerParameters.model.materials[0];

    let emissiveDisplay = document.querySelector("#emission-value");

    emissiveDisplay.textContent = material.pbrMetallicRoughness.emissiveFactor;


    // Defaults to gold
    material.pbrMetallicRoughness.setBaseColorFactor([0.7294, 0.5333, 0.0392]);

    document.querySelector('#emission').addEventListener('input', (event) => {
      material.pbrMetallicRoughness.setEmissiveFactor(event.target.value);
      emissiveDisplay.textContent = event.target.value;
    });

  </script>-->
<!-- ---------------------------------------------------------- -->
  <script>
  const modelViewerEmission = document.querySelector("model-viewer#sphere");

  document.querySelector('#emission-value').addEventListener('click', (event) => {
    const emissionString = event.target.dataset.emission;

    if (!emissionString) {
      return;
      console.log('no string');
    }

    const emission = emissionString.split(',')
    .map(numberString => parseFloat(numberString));
    const [material] = modelViewerEmission.model.materials;
    console.log('almost');
    material.pbrMetallicRoughness.setEmissiveFactor(emission);
    console.log('Changing color to: ', emission);
  });
  </script>
<!-- ----------------------------------------------------------   -->
  </div>
    <script src="script.js"></script>
    <script type="module" src="lottiescript.js"></script>
    <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
  </body>
</html>
